// src/app/shared/styles/_alert_table.scss

// üëá –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª—å —Ü–≤–µ—Ç–æ–≤ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞)
@use 'sass:color';

@mixin alert-table-styles($theme-color) {

  // üëá –í—ã—á–∏—Å–ª—è–µ–º —Å–≤–µ—Ç–ª—ã–π —Ü–≤–µ—Ç –¥–ª—è —Ç–µ–∫—Å—Ç–∞ (–∑–∞–º–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ lighten)
  $accent-text: color.adjust($theme-color, $lightness: 25%);

  // --- LAYOUT RESET ---
  :host {
    display: block;
    height: 100%;
    overflow: hidden;
  }

  .layout-container {
    display: flex;
    flex-direction: column;
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º 100vh, —á—Ç–æ–±—ã —Ç–∞–±–ª–∏—Ü–∞ –±—ã–ª–∞ —Ä–æ–≤–Ω–æ –ø–æ –≤—ã—Å–æ—Ç–µ —ç–∫—Ä–∞–Ω–∞
    height: 100vh;
    background-color: #121212;
    overflow: hidden;
  }

  // --- HEADER SECTION ---
  .coins-header {
    flex: 0 0 auto;
    display: flex; justify-content: space-between; align-items: center;
    margin-top: 34px; gap: 16px; padding: 0 16px; margin-bottom: 30px;
    position: relative;
    z-index: 2;
  }

  .header-title {
    flex: 1 1 auto; text-align: center; margin: 0;
    font-size: 1.5rem; font-weight: 400; color: #fff;

    // –¶–≤–µ—Ç —Å—á–µ—Ç—á–∏–∫–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–µ–º—ã
    span { color: $accent-text; }
  }

  .header-actions { flex: 0 0 auto; display: flex; gap: 8px; }

  // --- TABLE WRAPPER (–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å–∫—Ä–æ–ª–ª) ---
  .table-wrapper {
    flex: 1; // –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë –¥–æ—Å—Ç—É–ø–Ω–æ–µ –º–µ—Å—Ç–æ
    overflow: auto; // –í–∫–ª—é—á–∞–µ–º —Å–∫—Ä–æ–ª–ª
    margin: 0 16px;
    position: relative;
    z-index: 1;

    // –°–∫—Ä—ã–≤–∞–µ–º —Å–∫—Ä–æ–ª–ª–±–∞—Ä—ã
    scrollbar-width: none;
    -ms-overflow-style: none;
    &::-webkit-scrollbar { display: none; }
  }

  // --- TABLE STYLES ---
  .alerts-table {
    width: 100%;
    background: transparent;
    border-collapse: separate;

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∏–ª–∏ —Å—Ç—Ä–æ–∫–∏
    .mat-mdc-header-row {
      height: 40px;
      background: transparent;
      padding: 0; border: none;
    }

    // HEADER CELLS (STICKY + COLOR)
    .mat-mdc-header-cell {
      position: sticky;
      top: 0; // –õ–∏–ø–Ω–µ—Ç –∫ –≤–µ—Ä—Ö—É table-wrapper
      z-index: 100;

      // üî• –ì–õ–ê–í–ù–´–ô –¶–í–ï–¢ –®–ê–ü–ö–ò
      background-color: $theme-color;

      color: #fff;
      font-size: 0.8rem; font-weight: 200;
      text-transform: uppercase; border-bottom: none; padding: 0 16px;
      font-family: 'Roboto', sans-serif;

      // –¢–µ–Ω—å
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);

      ::ng-deep .mat-sort-header-arrow { color: rgba(255,255,255,0.7) !important; }
    }

    // ROWS
    .mat-mdc-row {
      height: 40px; background-color: #1e1e1e; transition: background 0.2s;
      &:hover { background-color: rgba(255,255,255,0.08) !important; }
    }

    // CELLS
    .mat-mdc-cell {
      color: #e0e0e0; font-size: 0.9rem; font-weight: 300;
      border-bottom: 1px solid rgba(255,255,255,0.05);
      padding: 0 16px; font-family: Roboto, sans-serif;
    }

    // --- COLUMNS ---
    .col-symbol {
      width: 20%; font-family: 'Roboto Mono', monospace; color: #fff; font-size: 0.85em;
      // üî• –¶–í–ï–¢ –¢–ò–ö–ï–†–ê
      .symbol-text { color: $accent-text; font-weight: 500; }
    }

    .col-target { width: 20%; font-family: 'Roboto Mono', monospace; color: #fff; font-size: 0.85em; }

    .col-type {
      width: 15%;
      // üëá –î–û–ë–ê–í–õ–ï–ù–û: –°—Ç–∏–ª—å "–ø–∏–ª—é–ª–∏" –¥–ª—è –ª–∏–Ω–∫–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Ü–≤–µ—Ç —Ç–µ–º—ã
      .links-pill {
        display: inline-flex;         // –ß—Ç–æ–±—ã "–æ–±–Ω–∏–º–∞—Ç—å" –∫–æ–Ω—Ç–µ–Ω—Ç
        align-items: center;
        justify-content: center;
        padding: 4px 10px;           // –û—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ –∫–∞–ø—Å—É–ª—ã
        border-radius: 99px;         // –§–æ—Ä–º–∞ –ø–∏–ª—é–ª–∏

        // –ú–∞–≥–∏—è —Ü–≤–µ—Ç–∞: –±–µ—Ä–µ–º —Ü–≤–µ—Ç —à–∞–ø–∫–∏ ($theme-color)
        border: 1px solid rgba($theme-color, 0.4); // –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Ä–∞–º–∫–∞
        background-color: rgba($theme-color, 0.08); // –û—á–µ–Ω—å –ª–µ–≥–∫–∏–π —Ñ–æ–Ω

        transition: all 0.2s ease-in-out;

        // –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –¥–µ–ª–∞–µ–º —è—Ä—á–µ
        &:hover {
          border-color: $theme-color;
          background-color: rgba($theme-color, 0.2);
          box-shadow: 0 0 8px rgba($theme-color, 0.3); // –õ–µ–≥–∫–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ
        }
      }
      .type-badge { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; padding: 4px 8px; font-size: 0.75rem; color: #ccc; }
    }

    .col-note { color: #888; font-style: italic; }
    .col-actions { width: 60px; text-align: right; padding-right: 24px !important; }

    .delete-icon-btn {
      background: transparent; border: none; color: #757575; cursor: pointer; display: inline-flex; padding: 6px; border-radius: 50%;
      &:hover { color: #ff5252; background: rgba(255,82,82,0.1); }
      mat-icon { font-size: 18px; width: 18px; height: 18px; }
    }

    // --- üî• TOGGLE STYLES (–¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –º–∏–∫—Å–∏–Ω) ---
    .mat-column-isActive {
      width: 80px;
      text-align: center;
      padding: 0 !important;
    }

    mat-slide-toggle {
      display: inline-block;
      transform: scale(0.7);
      margin: 0;
    }

    ::ng-deep .mat-mdc-slide-toggle .mdc-switch {
      width: 65px !important;
      height: 24px !important;
      position: relative !important;
    }

    ::ng-deep .mat-mdc-slide-toggle .mdc-switch__track {
      width: 100% !important;
      height: 100% !important;
      border-radius: 20px !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
    }

    ::ng-deep .mat-mdc-slide-toggle .mdc-switch__handle-track {
      width: 100% !important;
      height: 24px !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      display: flex !important;
      align-items: center !important;
    }

    ::ng-deep .mat-mdc-slide-toggle:not(.mdc-switch--checked) .mdc-switch__handle-track {
      transform: translateX(-3px) !important;
    }

    ::ng-deep .mat-mdc-slide-toggle.mdc-switch--checked .mdc-switch__handle-track,
    ::ng-deep .mdc-switch.mdc-switch--checked .mdc-switch__handle-track {
      transform: translateX(17px) !important;
    }

    ::ng-deep .mat-mdc-slide-toggle .mdc-switch__handle {
      width: 24px !important;
      height: 24px !important;
      position: relative !important;
      top: 12px !important;
    }

    ::ng-deep .mat-mdc-slide-toggle .mdc-switch__shadow {
      width: 24px !important;
      height: 24px !important;
    }

    ::ng-deep .mat-mdc-slide-toggle .mdc-switch__icons {
      width: 24px !important;
      height: 24px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
    }

    ::ng-deep .mat-mdc-slide-toggle .mdc-switch__icon {
      width: 16px !important;
      height: 16px !important;
    }

    ::ng-deep .mat-mdc-slide-toggle .mdc-switch__ripple {
      width: 48px !important;
      height: 48px !important;
      left: -12px !important;
      top: 50% !important;
      transform: translateY(-50%) !important;
    }

    ::ng-deep .mat-mdc-slide-toggle .mdc-label {
      display: none;
    }
  }

  // --- PAGINATOR (FIXED BOTTOM) ---
  .pagination-footer {
    flex: 0 0 auto; margin: 0 16px 16px 16px;
    background-color: #1e1e1e;
    border-radius: 0 0 8px 8px;
    overflow: hidden;
    position: relative; z-index: 2;

    ::ng-deep {
      .mat-mdc-paginator { background: transparent; color: #ccc; font-size: 12px !important; }
      .mat-mdc-select-value { color: #ccc; font-size: 12px !important; }
      .mat-mdc-paginator-icon { fill: #ccc; }
      .mat-mdc-select-arrow { color: #ccc; }
      .mat-mdc-form-field-outline { color: #555; }
    }
  }

  // --- DROPDOWN FIXES ---
  ::ng-deep .mat-mdc-select-panel { padding: 4px 0 !important; }
  ::ng-deep .mat-mdc-option {
    font-size: 12px !important; min-height: 32px !important; height: 32px !important;
    line-height: 32px !important; padding: 0 10px !important;
    .mdc-list-item__primary-text { font-size: 12px !important; }
  }

  .loading-overlay { display: flex; justify-content: center; align-items: center; height: 100vh; }
  .empty-cell { text-align: center; padding: 40px; color: #666; font-style: italic; }
}
